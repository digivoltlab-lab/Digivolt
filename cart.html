<script>
const productImages = {
    "Arduino Uno R3": "Arduino.jpg.jpg",
    "Raspberry Pi 4": "RaspberryPi.jpg"
};

function loadCart() {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let table = document.getElementById('cartTable');
    let total = 0;

    cart.forEach(item => {
        let row = table.insertRow();
        let imgCell = row.insertCell(0);
        let nameCell = row.insertCell(1);
        let qtyCell = row.insertCell(2);
        let priceCell = row.insertCell(3);
        let totalCell = row.insertCell(4);
        let actionCell = row.insertCell(5);

        imgCell.innerHTML = `<img src="${productImages[item.name] || 'placeholder.jpg'}" alt="${item.name}" width="60">`;
        nameCell.textContent = item.name;

        // Quantity with + - buttons
        qtyCell.innerHTML = `
            <button onclick="changeQty('${item.name}', -1)">-</button>
            ${item.quantity}
            <button onclick="changeQty('${item.name}', 1)">+</button>
        `;

        priceCell.textContent = `₹${item.price}`; // single piece price
        totalCell.textContent = `₹${item.price * item.quantity}`;
        actionCell.innerHTML = `<button onclick="removeItem('${item.name}')">❌</button>`;

        total += item.price * item.quantity;
    });

    document.getElementById('cartTotal').textContent = `Total: ₹${total}`;
}

function changeQty(name, change) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart = cart.map(item => {
        if (item.name === name) {
            item.quantity += change;
            if (item.quantity < 1) item.quantity = 1; // minimum 1
        }
        return item;
    });
    localStorage.setItem('cart', JSON.stringify(cart));
    location.reload();
}

function removeItem(name) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart = cart.filter(item => item.name !== name);
    localStorage.setItem('cart', JSON.stringify(cart));
    location.reload();
}

window.onload = loadCart;
</script>
