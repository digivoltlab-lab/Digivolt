<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digivolt - Listings</title>
<style>
    body { 
        font-family: Arial, sans-serif; 
        background: linear-gradient(135deg, #e0f7fa, #e3f2fd);
        margin: 0; padding: 0; 
    }
    header { 
        background: #0288d1; 
        color: white; 
        padding: 20px; 
        text-align: center; 
        position: relative; 
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    h1 { margin: 0; }
    .search-box { margin-top: 10px; }
    .search-box input {
        width: 80%;
        max-width: 400px;
        padding: 8px;
        border-radius: 5px;
        border: none;
        outline: none;
        font-size: 16px;
    }
    .container { 
        max-width: 1200px; 
        margin: auto; 
        padding: 20px; 
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }
    .listing { 
        background: white; 
        padding: 15px; 
        border-radius: 10px; 
        box-shadow: 0px 4px 10px rgba(0,0,0,0.1); 
        border-left: 5px solid #4cafef; 
        transition: transform 0.2s;
        text-align: center;
        flex: 1 1 250px;
        max-width: 250px;
    }
    .listing:hover { transform: scale(1.02); border-left-color: #00c853; }
    .listing img {
        width: 100%;
        height: auto;
        max-height: 200px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 10px;
        cursor: pointer;
    }
    .listing h2 { margin: 0 0 10px; color: #01579b; font-size: 1.2em; }
    .listing p { margin: 0 0 10px; color: #555; font-size: 0.95em; }
    .price { color: green; font-weight: bold; font-size: 1.1em; }
    .controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
    }
    .btn { 
        display: inline-block; 
        width: 40px; height: 40px; 
        background: #4cafef; 
        color: white; 
        font-size: 20px; 
        text-align: center; 
        line-height: 40px; 
        border-radius: 8px; 
        cursor: pointer; 
        border: none; 
        font-weight: bold;
    }
    .btn:hover { background: #3a8fd0; }
    .btn-remove { background: #f44336; }
    .btn-remove:hover { background: #d32f2f; }
    .counter { 
        background: #2196F3; 
        color: white; 
        padding: 5px 10px; 
        border-radius: 50%; 
        font-weight: bold; 
        min-width: 28px; 
        text-align: center; 
    }
    .buy-btn { 
        position: absolute; 
        right: 20px; top: 50%; 
        transform: translateY(-50%); 
        background: #ff9800; 
        padding: 10px 20px; 
        border-radius: 8px;
        text-decoration: none;
        color: white;
    }
    .buy-btn:hover { background: #e68900; }
    @media (max-width: 600px) {
        header { padding: 15px; }
        .buy-btn {
            position: static;
            display: inline-block;
            margin-top: 10px;
            transform: none;
        }
    }
</style>
</head>
<body>
<header>
    <h1>Digivolt Listings</h1>
    <p>Your tech marketplace</p>
    <div class="search-box">
        <input type="text" id="search" placeholder="Search products..." onkeyup="filterProducts()">
    </div>
    <a href="cart.html" class="buy-btn">Buy</a>
</header>

<div class="container" id="product-list">
<script>
let products = [
    {name: "Breadboard WISH WB 150", price: 50, img: "breadboard.jpg"},
    {name: "Wire Stripper EGO 150B", price: 120, img: "wirestripper.jpg"},
    {name: "Berg Wires F-F", price: 20, img: "berg-ff.jpg"},
    {name: "Berg Wires M-M", price: 20, img: "berg-mm.jpg"},
    {name: "Berg Wires M-F", price: 20, img: "berg-mf.jpg"},
    {name: "Resistor 15K 1/4W", price: 5, img: "resistor.jpg"},
    {name: "1k ohm resistor", price: 5, img: "resistor.jpg"},
    {name: "10k ohm resistor", price: 5, img: "resistor.jpg"},
    {name: "100k ohm resistor", price: 5, img: "resistor.jpg"},
    {name: "220k ohm resistor", price: 5, img: "resistor.jpg"},
    {name: "330k ohm resistor", price: 5, img: "resistor.jpg"},
    {name: "Diode IN4007", price: 3, img: "diode.jpg"},
    {name: "Zener diode 3.6V", price: 5, img: "diode.jpg"},
    {name: "MOSFET IRF 640", price: 25, img: "mosfet.jpg"},
    {name: "BJT 2N2222", price: 10, img: "bjt.jpg"},
    {name: "LDR small size", price: 15, img: "ldr.jpg"},
    {name: "LED red 3mm", price: 2, img: "led.jpg"},
    {name: "1nF ceramic capacitor", price: 2, img: "capacitor.jpg"},
    {name: "10nF ceramic capacitor", price: 2, img: "capacitor.jpg"},
    {name: "100nF ceramic capacitor", price: 2, img: "capacitor.jpg"},
    {name: "1K Pot", price: 10, img: "pot.jpg"},
    {name: "7 SEGMENT DISPLAY", price: 30, img: "7segment.jpg"},
    {name: "BLDC Motor", price: 500, img: "bldc.jpg"},
    {name: "Motor Driver", price: 150, img: "motordriver.jpg"},
    {name: "Gear Motor", price: 300, img: "gearmotor.jpg"},
    {name: "Transistor", price: 5, img: "transistor.jpg"},
    {name: "0PCB", price: 40, img: "pcb.jpg"}
];

function makeSafeID(name) {
    return name.replace(/\s+/g, '-');
}

function renderProducts() {
    let container = document.getElementById('product-list');
    products.forEach(p => {
        let item = document.createElement('div');
        item.className = 'listing';
        item.innerHTML = `
            <img src="${p.img}" alt="${p.name}">
            <h2>${p.name}</h2>
            <p>High-quality electronic component.</p>
            <p class="price">â‚¹${p.price}</p>
            <div class="controls">
                <button class="btn" onclick="addToCart('${p.name}', ${p.price})">+</button>
                <span class="counter" id="counter-${makeSafeID(p.name)}">0</span>
                <button class="btn btn-remove" onclick="removeFromCart('${p.name}')">-</button>
            </div>
        `;
        container.appendChild(item);
    });
}

function loadCounters() {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.forEach(item => {
        let counterEl = document.getElementById('counter-' + makeSafeID(item.name));
        if (counterEl) {
            counterEl.textContent = item.quantity;
        }
    });
}

function addToCart(productName, price) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let existingItem = cart.find(item => item.name === productName);
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({ name: productName, price: price, quantity: 1 });
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    document.getElementById('counter-' + makeSafeID(productName)).textContent = existingItem ? existingItem.quantity : 1;
}

function removeFromCart(productName) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let existingItem = cart.find(item => item.name === productName);
    if (existingItem && existingItem.quantity > 0) {
        existingItem.quantity -= 1;
        if (existingItem.quantity === 0) {
            cart = cart.filter(item => item.name !== productName);
        }
        localStorage.setItem('cart', JSON.stringify(cart));
        document.getElementById('counter-' + makeSafeID(productName)).textContent = existingItem.quantity > 0 ? existingItem.quantity : 0;
    }
}

function filterProducts() {
    let input = document.getElementById('search').value.toLowerCase();
    let listings = document.querySelectorAll('.listing');
    listings.forEach(item => {
        let title = item.querySelector('h2').textContent.toLowerCase();
        let desc = item.querySelector('p').textContent.toLowerCase();
        if (title.includes(input) || desc.includes(input)) {
            item.style.display = "";
        } else {
            item.style.display = "none";
        }
    });
}

window.onload = () => { renderProducts(); loadCounters(); };
</script>
</div>

</body>
</html>
